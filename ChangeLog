2010-08-23  Mark Grondona  <mgrondona@llnl.gov>

	* src/spank/io-watchdog.c :
	  Change 'rank' to a signed long since it is tested < 0 in the code.
	  Fix for CHAOS bz#1031.

2009-11-17  Mark Grondona  <mgrondona@llnl.gov>

	* : tag v0.7.

	* tests/functions, tests/check-ld-preload.sh :
	  Other testsuite fixes.

	* tests/Makefile.am, tests/api-stress.c, tests/check-api.sh :
	  Add API stress test to testsuite.

	* src/watchdog/io-watchdog.c :
	  Do not update IO_WATCHDOG_TIMEOUT in watchdog environment for
	  each update of the timeout by the client API, as this leads
	  to a memory leak. Instead, only update just before any action
	  is called (just as the real value is needed).

	* src/lib/shared.h, src/lib/shared.c :
	  Switch to pthread_barrier_t for shared mem barrier implementation.

2009-11-13  Mark Grondona  <mgrondona@llnl.gov>

	* src/watchdog/io-watchdog.c, src/watchdog/io-watchdog.1.in :
	  Add -q, --quiet option to io-watchdog.

	* src/watchdog/io-watchdog.c :
	  Allow default path to io-watchdog executable to be overridden
	  by IO_WATCHDOG_SERVER_PATH environment variable. This is necessary
	  for some of the testsuite tests.

2009-11-12  Mark Grondona  <mgrondona@llnl.gov>

	* io-watchdog.spec :
	  Split io-watchdog rpms into -devel, -libs, and -slurm subpackages.

	* src/spank/io-watchdog.c :
	  Rearrange internal options structure for space effeciency.

	* src/lib/split.c :
	  Fix unused variable warning.

	* src/spank/io-watchdog.c :
	  Enable a "persist" parameter in the spank plugin.

	* src/watchdog/io-watchdog.c, src/watchdog/io-watchdog.1.in:
	  New parameter --persistent reenables the old (undesireable)
	  behavior of io-watchdog process hanging around after first
	  timeout event.

	* src/watchdog/io-watchdog.c :
	  Exit from io-watchdog server after first timeout event.

2009-11-11  Mark Grondona  <mgrondona@llnl.gov>

	* AUTHORS, NEWS : Added.

	* tests/ :
	  Add an intial testsuite for io-watchdog.
	  
2009-11-05  Mark Grondona  <mgrondona@llnl.gov>

	* src/watchdog/io-watchdog.c :
	  Don't use a secondary prefix for log messages in the
	  io-watchdog server process.

2009-11-04  Mark Grondona  <mgrondona@llnl.gov>

	* src/lib/shared.c :
	  Use current time instead of process PID for shared memory
	  filename generation.

2009-11-03  Mark Grondona  <mgrondona@llnl.gov>

	* src/watchdog/io-watchdog.c :
	  Detect exec(2) failures in watchdog server by using a pipe
	  throught which "child" (actually parent) communicates exec
	  failure back to io-watchdog server.

	* src/watchdog/io-watchdog.c :
	  Do not return from exec_user_args. Exit with exit code 127
	  on any failure to exec user process.

2009-11-02  Mark Grondona  <mgrondona@llnl.gov>

	* src/api/io-watchdog.3.in :
	  Add io-watchdog(3) man page.

2009-11-01  Mark Grondona  <mgrondona@llnl.gov>

	* src/api/Makefile.am,
	  src/api/io-watchdog.h,
	  src/api/libio-watchdog.c,
	  src/interposer/io-watchdog-interposer.c,
	  src/lib/shared.h, src/lib/shared.c,
	  src/watchdog/io-watchdog.c :
	  Add initial version of io-watchdog client API.

	* src/interposer/io-watchdog-interposer.c,
	  src/lib/shared.c, src/lib/shared.h,
	  src/watchdog/io-watchdog.c :
	  Replace the sleep-and-check loop in io-watchdog server with
	  a process-shared condition variable for shared memory
	  synchronization.

	* : Add autoconf check for pthreads library.

	* : Re-run ./bootstrap.

2009-09-22  Mark Grondona  <mgrondona@llnl.gov>

	* src/watchdog/io-watchdog.1.in,
	  src/watchdog/io-watchdog.c :
	  Set IO_WATCHDOG_TIMEOUT and IO_WATCHDOG_TARGET in action scripts.

	* src/watchdog/io-watchdog.1.in :
	  Fix typo in io-watchdog manpage.

2009-09-18  Mark Grondona  <mgrondona@llnl.gov>

	* src/spank/io-watchdog.c :
	  Fix help description of action list.

2008-09-27  Mark Grondona  <mgrondona@llnl.gov>

	* : Update License information for release.

	* : tag v0.6.

2008-01-24  Mark Grondona  <mgrondona@llnl.gov>

	* src/interposer/io-watchdog-interposer.c (scale) : 
	  Fix potential buffer overrun of scale suffix array (Coverity).

	* src/interposer/io-watchdog-interposer.c : 
	  Fix unused value when checking IO_WATCHDOG_EXACT (Coverity).

2007-07-06  Mark Grondona  <mgrondona@llnl.gov>

	* src/interposer/io-watchdog-interposer.c : 
	  Ensure some stdio functions are not #defined, and undef them if so.

	* src/watchdog/io-watchdog.c, src/watchdog/io-watchdog.1.in,
	  src/conf/conf-parser.l, src/conf/conf-parser.y,
	  src/conf/io-watchdog.conf.5.in :
	  Change --exact-timeout option in io-watchdog to --method=exact,
	  and exact-timeout keywork in io-watchdog.conf to timeout-method
	  for possible expansion later.
	  
	* : tag v0.5.

2007-07-05  Mark Grondona  <mgrondona@llnl.gov>

	* io-watchdog.spec : Add BuildRequires.

	* src/watchdog/io-watchdog.c, src/watchdog/io-watchdog.1.in,
	  src/lib/shared.h, src/interposer/io-watchdog-interposer.c,
	  src/conf/conf-parser.l, src/conf/conf-parser.y, src/conf/conf.c,
	  src/conf/conf.h, src/spank/io-watchdog.c :
	  Add support for more precise timeout handling in the IO watchdog.
	  Optionally record a timestamp for the last write detected in
	  the interposer, and use this information to sleep the correct
	  amount of time in the io-watchdog server. Since this will incur
	  some overhead, it is disabled by default, and enabled via
	  the option --exact-timeout and config parameter exact-timeout.


2007-01-17  Mark Grondona  <mgrondona@llnl.gov>

	* : tag v0.4.

	* io-watchdog.spec : 
	  Fix specfile globbing so debuginfo files are not included
	  in main io-watchdog RPM.

2007-01-17  Mark Grondona  <mgrondona@llnl.gov>

	* : tag v0.3.

	* io-watchdog.spec :
	  Conditionally include SLURM plugin.

	* configure, Makefile.in, src/Makefile.in, src/lib/Makefile.in,
	  src/conf/Makefile.in, src/watchdog/Makefile.in, 
	  src/interposer/Makefile.in, src/spank/Makefile.in :
	  Re-run bootstrap.

	* configure.ac, src/Makefile.am :
	  Check for slurm/spank.h header file. Conditionally compile
	  spank plugin only if spank header is found.

2007-01-16  Mark Grondona  <mgrondona@llnl.gov>

	* src/watchdog/io-watchdog.1.in, src/watchdog/Makefile.am,
	  src/conf/io-watchdog.conf.5.in, src/conf/Makefile.am,
	  configure.ac :
	  Add manpages io-watchdog(1) and io-watchdog.conf(5).

2007-01-10  Mark Grondona  <mgrondona@llnl.gov>

	* : tag v0.2. 

	* src/spank/io-watchdog.c :
	  Be sure to export IO_WATCHDOG_SHARED_FILE to task.

	* src/watchdog/io-watchdog.c :
	  Unset IO_WATCHDOG_CONFIG from action environment.

	* src/spank/io-watchdog.c : 
	  Fix bug in environment setup which caused failure to
	  propagate user options to the watchdog server.

	* : tag v0.1.

	* src/watchdog/io-watchdog.c : 
	  Exit io-watchdog server if application has already exited.

	* src/conf/conf.c, src/conf/conf.h, src/conf/Makefile.am,
	  src/spank/io-watchdog.c, src/interposer/io-watchdog-interposer.c,
	  src/interposer/Makefile.am :
	  Remove references to /usr/bin/io-watchdog and replace with
	  io_watchdog_path which is determined at build-time based
	  on --prefix.	  

	* : Intial commit.
